import"../chunks/DsnmJJEf.js";import{p as ye,c as t,s as d,e as T,g as a,t as k,a as we,b as P,i as ke,$ as je,r as s,n as Ie,T as Q,h as U,f as X}from"../chunks/FR9Ny5Rr.js";import{d as Te,s as _}from"../chunks/BgV8Z7Xh.js";import{f as u,a as m,c as Y,t as Z}from"../chunks/D1SIKM6M.js";import{i as A}from"../chunks/COxdh9d2.js";import{e as $,s as ee,c as te,i as se}from"../chunks/DKrqINF1.js";import{h as Ae}from"../chunks/CD6TdMC2.js";import{b as ae}from"../chunks/P7epzAGM.js";function Le(){return{leftText:`行 1: Hello World
行 2: 这是旧版本
行 3: 保持不变
行 4: 将会被删除`,rightText:`行 1: Hello World
行 2: 这是新版本（修改了）
行 3: 保持不变
行 5: 新增一行内容`}}var De=u('<section class="grid gap-2 md:grid-cols-2"><div class="space-y-1"><div class="flex items-center justify-between text-xs"><span class="font-medium text-slate-700">旧版本</span> <span class="text-[11px] text-slate-400">行数： <!></span></div> <textarea class="h-40 w-full resize-y border border-slate-300 bg-white px-2 py-1.5 text-xs font-mono leading-snug text-slate-800 focus:border-rose-700 focus:outline-none focus:ring-1 focus:ring-rose-700" placeholder="在这里粘贴旧版本文本…"></textarea></div> <div class="space-y-1"><div class="flex items-center justify-between text-xs"><span class="font-medium text-slate-700">新版本</span> <span class="text-[11px] text-slate-400"> </span></div> <textarea class="h-40 w-full resize-y border border-slate-300 bg-white px-2 pt-1.5 text-xs font-mono leading-snug text-slate-800 focus:border-teal-600 focus:outline-none focus:ring-1 focus:ring-teal-500" placeholder="在这里粘贴新版本文本…"></textarea></div></section>'),ze=u('<div class="px-3 py-4 text-center text-[11px] text-slate-400">暂无内容，请在上方输入需要对比的两段文本。</div>'),Ee=u('<span class="text-rose-700 line-through"> </span>'),He=u('<span class="text-slate-800"> </span>'),Ve=u('<div><div class="w-10 shrink-0 px-2 py-0.5 text-right text-slate-400"> </div> <div class="flex-1 px-2 py-0.5 whitespace-pre-wrap"><!></div></div>'),We=u('<div class="px-3 py-4 text-center text-[11px] text-slate-400">暂无内容，请在上方输入需要对比的两段文本。</div>'),Me=u('<span class="text-emerald-700 font-semibold"> </span>'),Pe=u('<span class="text-slate-800"> </span>'),Re=u('<div><div class="w-10 shrink-0 px-2 py-0.5 text-right text-slate-400"> </div> <div class="flex-1 px-2 py-0.5 whitespace-pre-wrap"><!></div></div>'),Se=u('<div class="mx-auto space-y-4"><header class="flex flex-col gap-2 border-b border-slate-200 pb-1 md:flex-row md:items-end md:justify-between"><div><h1 class="text-lg font-semibold text-slate-900">Diff 对比器</h1> <p class="text-xs text-slate-500">左右两侧输入文本，下方为结果表格。 <span class="text-orange-800">因为在 Sveltekit 中还没找到合适的 <span class="font-bold">编辑器插件</span>，所以输入和结果输出分开上下区域展示。</span></p></div> <div class="flex gap-2 text-xs"><button type="button" class="text-amber-50 bg-sky-700 px-2 py-1 hover:bg-sky-900">填充示例</button> <button type="button" class="bg-rose-800 px-3 py-1 font-medium text-white hover:bg-rose-700">清空</button></div></header> <div class="grid-cols-2 space-y-1"><!> <section><button type="button" class="text-xs p-1 w-[100px] bg-sky-600 text-white cursor-pointer"> </button></section></div> <section class="space-y-1"><div class="flex items-center justify-between text-xs"><div class="flex flex-wrap items-center gap-2"><span class="font-medium text-slate-700">对比结果</span> <span class="text-[11px] text-slate-400"> </span></div> <div class="flex flex-wrap items-center gap-3 text-[11px] text-slate-500"><span class="inline-flex items-center gap-1"><span class="h-3 w-3 border border-rose-400 bg-rose-50"></span> 左侧删除行</span> <span class="inline-flex items-center gap-1"><span class="h-3 w-3 border border-emerald-400 bg-emerald-50"></span> 右侧新增行</span> <span class="inline-flex items-center gap-1"><span class="h-3 w-3 border border-slate-200 bg-slate-50"></span> 未改变</span></div></div> <div class="grid gap-2 md:grid-cols-2"><div class="border border-slate-200 bg-white text-[11px]"><div class="border-b border-slate-200 px-2 py-1 text-xs font-medium text-slate-700">左侧 · 旧版本</div> <div class="max-h-[420px] overflow-auto font-mono leading-snug"><!></div></div> <div class="border border-slate-200 bg-white text-[11px]"><div class="border-b border-slate-200 px-2 py-1 text-xs font-medium text-slate-700">右侧 · 新版本</div> <div class="max-h-[420px] overflow-auto font-mono leading-snug"><!></div></div></div></section></div>');function Oe(re,ie){ye(ie,!0);let D=P(!0);const le=Q(()=>a(D)?"隐藏":"展示");let j=P(""),I=P("");const ne=()=>{const l=Le();T(j,l.leftText,!0),T(I,l.rightText,!0)};function de(l,v){const f=l.length===0?[]:l.split(`
`),b=v.length===0?[]:v.split(`
`),n=f.length,x=b.length,o=Array.from({length:n+1},()=>new Array(x+1).fill(0));for(let r=0;r<n;r++)for(let e=0;e<x;e++)f[r]===b[e]?o[r+1][e+1]=o[r][e]+1:o[r+1][e+1]=Math.max(o[r+1][e],o[r][e+1]);const y=[];let p=n,g=x;for(;p>0&&g>0;)f[p-1]===b[g-1]?(y.push({i:p-1,j:g-1}),p--,g--):o[p-1][g]>=o[p][g-1]?p--:g--;y.reverse();const h=[];let c=0,i=0;for(const r of y){const{i:e,j:w}=r;for(;c<e;)h.push({kind:"removed",left:f[c],leftIndex:c+1}),c++;for(;i<w;)h.push({kind:"added",right:b[i],rightIndex:i+1}),i++;h.push({kind:"unchanged",left:f[e],right:b[w],leftIndex:e+1,rightIndex:w+1}),c=e+1,i=w+1}for(;c<n;)h.push({kind:"removed",left:f[c],leftIndex:c+1}),c++;for(;i<x;)h.push({kind:"added",right:b[i],rightIndex:i+1}),i++;return h}const L=Q(()=>de(a(j),a(I)));function oe(){T(j,""),T(I,"")}var z=Se();Ae("jm2rrs",l=>{ke(()=>{je.title="Diff 对比工具 · Text Diff"})});var E=t(z),R=d(t(E),2),S=t(R);S.__click=ne;var ve=d(S,2);ve.__click=oe,s(R),s(E);var H=d(E,2),q=t(H);{var xe=l=>{var v=De(),f=t(v),b=t(f),n=d(t(b),2),x=d(t(n));{var o=e=>{var w=Z("0");m(e,w)},y=e=>{var w=Z();k(ue=>_(w,ue),[()=>a(j)?a(j).split(`
`).length:0]),m(e,w)};A(x,e=>{a(j).length===0?e(o):e(y,!1)})}s(n),s(b);var p=d(b,2);U(p),s(f);var g=d(f,2),h=t(g),c=d(t(h),2),i=t(c);s(c),s(h);var r=d(h,2);U(r),s(g),s(v),k(e=>_(i,`行数：${e??""}`),[()=>a(I)?a(I).split(`
`).length:0]),ae(p,()=>a(j),e=>T(j,e)),ae(r,()=>a(I),e=>T(I,e)),m(l,v)};A(q,l=>{a(D)&&l(xe)})}var B=d(q,2),V=t(B);V.__click=()=>T(D,!a(D));var pe=t(V);s(V),s(B),s(H);var C=d(H,2),W=t(C),F=t(W),G=d(t(F),2),ce=t(G);s(G),s(F),Ie(2),s(W);var J=d(W,2),M=t(J),K=d(t(M),2),fe=t(K);{var be=l=>{var v=ze();m(l,v)},ge=l=>{var v=Y(),f=X(v);$(f,17,()=>a(L),se,(b,n)=>{var x=Ve(),o=t(x),y=t(o,!0);s(o);var p=d(o,2),g=t(p);{var h=i=>{var r=Ee(),e=t(r,!0);s(r),k(()=>_(e,a(n).left??"")),m(i,r)},c=i=>{var r=He(),e=t(r,!0);s(r),k(()=>_(e,a(n).left??"")),m(i,r)};A(g,i=>{a(n).kind==="removed"?i(h):i(c,!1)})}s(p),s(x),k(()=>{ee(x,1,te(a(n).kind==="removed"?"flex border-b border-slate-100 bg-rose-50":a(n).kind==="unchanged"?"flex border-b border-slate-100 bg-slate-50/40":"flex border-b border-slate-100 bg-white")),_(y,a(n).leftIndex??"")}),m(b,x)}),m(l,v)};A(fe,l=>{a(L).length===0?l(be):l(ge,!1)})}s(K),s(M);var N=d(M,2),O=d(t(N),2),he=t(O);{var me=l=>{var v=We();m(l,v)},_e=l=>{var v=Y(),f=X(v);$(f,17,()=>a(L),se,(b,n)=>{var x=Re(),o=t(x),y=t(o,!0);s(o);var p=d(o,2),g=t(p);{var h=i=>{var r=Me(),e=t(r,!0);s(r),k(()=>_(e,a(n).right??"")),m(i,r)},c=i=>{var r=Pe(),e=t(r,!0);s(r),k(()=>_(e,a(n).right??"")),m(i,r)};A(g,i=>{a(n).kind==="added"?i(h):i(c,!1)})}s(p),s(x),k(()=>{ee(x,1,te(a(n).kind==="added"?"flex border-b border-slate-100 bg-emerald-50":a(n).kind==="unchanged"?"flex border-b border-slate-100 bg-slate-50/40":"flex border-b border-slate-100 bg-white")),_(y,a(n).rightIndex??"")}),m(b,x)}),m(l,v)};A(he,l=>{a(L).length===0?l(me):l(_e,!1)})}s(O),s(N),s(J),s(C),s(z),k(()=>{_(pe,`${a(le)??""}输入区域`),_(ce,`行对比总数：${a(L).length??""}`)}),m(re,z),we()}Te(["click"]);export{Oe as component};
